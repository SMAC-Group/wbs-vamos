function RRPublish2(parent,eventid,page,listToShow,contestToShow){this.ShowInfoText=!1,this.ShowTimerLogo=!1,this.showLists=function(){config=currContest=currList=null,showLists()},this.showList=function(e,t,i){e=getListByName(e);return!!e&&showList(e.ID,t,i)};var self=this,divPoweredBy,divListHeader,divListFooter,divMainDiv,divRRPInfoText,tMain,divLoading,divSelector,groupFilter=[],selectorResult,menuListFilterContest,inpSearch,lastRequestID=0,config,currList,currListMID=0,currContest=null,currListCols=0,currListLines=1,currDetailsTR=null,currListData=null,favOnly=!1,listFormat,openedGroups={},openedParticipants=[],lastSearchTerm="",listGroupingColWidths,listColWidths,lastAnchor="",currArrPointer=null,hiddenCols=[],hideAddLines=!1,mutationObserver;function removeEmbeddedMargin(){parent.style.marginLeft=0,parent.style.marginRight=0,window.innerWidth<=640&&parent.offsetParent&&(parent.style.marginLeft=-parent.offsetLeft+"px",parent.style.marginRight=parent.offsetWidth-parent.offsetParent.offsetWidth+"px")}function resize(){var e,t;removeEmbeddedMargin(),currList&&(e=hiddenCols,t=hideAddLines,determineHiddenCols(),t===hideAddLines&&e.join(",")===hiddenCols.join(",")||buildList(currListData))}function determineHiddenCols(){var e=parent.offsetWidth;if(hideAddLines=!(hiddenCols=[]),!(970<=e)){for(var t=0,i=[],s=0,n=1;n<=currListLines;n++)for(var r=0,o=0;o<listFormat.Fields.length;o++)if(listFormat.Fields[o].Line===n){for(var a=0;a<listFormat.Fields[o].ColOffset;a++)i[++r]=0;s<++r&&(s=r),void 0===i[r]&&(i[r]=0),i[r]=Math.max(i[r],listColWidths[o]*(listFormat.Fields[o].FontBold?10:8.5)+6),1<listFormat.Fields[o].ColSpan&&(r+=listFormat.Fields[o].ColSpan-1)}for(r=1;r<s;r++)t+=i[r];if(e-20<t){hideAddLines=!0;var l=-1;if("results"===page||"live"===page)for(n=-1;n<=1;n++){for(o=listFormat.Fields.length-1;0<=o;o--)if(void 0===(d=listFormat.Fields[o]).ResponsiveHide&&(d.ResponsiveHide=0),d.ResponsiveHide===n&&1===d.Line&&!d.Link){e-=listColWidths[o]*(d.FontBold?9.5:8)+6,l=o;break}if(0<=l)break}for(n=-1;n<=1;n++)for(var d,c,o=0;o<listFormat.Fields.length;o++)void 0===(d=listFormat.Fields[o]).ResponsiveHide&&(d.ResponsiveHide=0),d.ResponsiveHide===n&&1===d.Line&&l!=o&&((e<3*(c=listColWidths[o]*(d.FontBold?9.5:8)+6)/4||e<c&&c<60)&&hiddenCols.push(o),e-=c)}}}function determineColsAndLines(e){var t=e.Fields;currListLines=currListCols=1;for(var i=0;i<t.length;i++)t[i].Line>currListLines&&(currListLines=t[i].Line);for(var s=1;s<=currListLines;s++){for(var n=1,i=0;i<t.length;i++)t[i].Line===s&&(n+=t[i].ColOffset,1<t[i].ColSpan&&(n+=t[i].ColSpan-1),n++);currListCols<n&&(currListCols=n)}}function clearParent(){for(var e=parent.childNodes.length-1;0<=e;e--)"Loading"!==parent.childNodes[e].className&&"RRPInfoText"!==parent.childNodes[e].className&&"SelectorParent"!==parent.childNodes[e].className&&parent.removeChild(parent.childNodes[e])}function loadConfig(t){Get(rrp_server+"/"+eventid+"/RRPublish/data/config",{lang:rrp_lang,page:page,noVisitor:getCookie("ys"+eventid),v:"1"}).then(function(e){setCookie("ys"+eventid,"1",1),e.error?(showLoading(!1),showError(e.error)):((config=e).server&&(rrp_server="https://"+config.server),self.TimeUpdater.SetOffset(new Date/1e3-config.Time),t&&t())}).catch(function(e){alert("Loading config failed, please try again.")})}function setAnchor(e){""===(lastAnchor=e)&&"pushState"in history?history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash=e}function showError(e){clearParent(),showLoading(!1);var t=parent.cc("div");t.style.textAlign="center",t.style.paddingTop="100px",t.at(e)}function countLists(e){for(var t=0,i=0;i<config.lists.length;i++){var s=config.lists[i];s.Mode||(s.Mode=""),!(0<=s.Format.indexOf("V")||0<=s.Format.indexOf("P"))||""!=s.Mode||void 0!==e&&e!=s.Contest||t++}return t}function showLists(){if(favOnly=!1,currList=null,divSelector&&divSelector.parentNode.removeChild(divSelector),divSelector=null,""!=lastAnchor&&setAnchor(""),document.body.removeClass("rrp_ShowingList"),config){var e=countLists();if(0===e||"results"===page&&!config.showResults||"participants"===page&&!config.showParticipants||"live"===page&&!config.showLive)showError(langItems.noListsPublished);else{if(1===e||"dropdown"===config.ListSelector)for(var t=0;t<config.lists.length;t++)if((o=config.lists[t]).Mode||(o.Mode=""),""==o.Mode)return showList(o.ID,o.Contest,void 0,!0);clearParent(),showSelector();var i=parent.cc("div");i.className="Tiles";parent.cc("div").style.clear="both",addPoweredBy();for(var s=-1,n=0,t=0;t<config.lists.length;t++)(o=config.lists[t]).Mode||(o.Mode=""),(0<=o.Format.indexOf("V")||0<=o.Format.indexOf("P"))&&""==o.Mode&&o.Contest!=s&&(n++,s=o.Contest);if(0===n)showError(langItems.noListsPublished);else{var r=0;s=-1;for(var o,a,l,d,c,u,v,t=0;t<config.lists.length;t++)(o=config.lists[t]).Mode||(o.Mode=""),(0<=o.Format.indexOf("V")||0<=o.Format.indexOf("P"))&&""==o.Mode&&(o.Contest!=s&&(s=o.Contest,(a=i.cc("div")).className="Tile",a.contest=o.Contest,a.onclick=function(){this.firstListID&&showList(this.firstListID,this.contest)},(d=a.cc("div")).className="TileHead",(d=d.cc("div")).className="TileHeadText",l=0==o.Contest?langItems.allContests:Text(config.contests[o.Contest]),d.at(l),l=(d=a.cc("table")).cc("tbody"),d.className="TilesList",r=0),o.ShowAs||(o.ShowAs=o.Name,0<=(d=o.ShowAs.indexOf("|"))&&(o.ShowAs=o.ShowAs.substr(d+1))),"\\n"===o.ShowAs.substr(o.ShowAs.length-2)?(ShowAs=o.ShowAs.substr(0,o.ShowAs.length-2),s=-1):ShowAs=o.ShowAs,(c=l.cc("tr")).listID=o.ID,c.contest=o.Contest,c.div=a,0<=o.Format.indexOf("V")?c.onclick=function(){this.div.firstListID||showList(this.listID,this.contest)}:(c.link=rrp_server+"/"+eventid+"/RRPublish/data/pdf?name="+encodeURIComponent(o.Name)+"&contest="+o.Contest+"&lang="+rrp_lang,c.onclick=function(){window.open(this.link)}),c.className="TilesList",(u=(v=c.cc("td")).cc("img")).src=rrp_server+"/RRPublish/graphics/resultlist2.png",u.style.width="16px",u.style.height="17px",v.style.width="1%",v.style.opacity=.7,(v=c.cc("td")).at(Text(ShowAs)),v.style.width="99%",1===++r?a.firstListID=o.ID:2===r&&(a.className="Tile",a.firstListID=""))}1===n&&(a.className+=" Tile1"),showLoading(!1),resize()}}else clearParent(),showLoading(!0),loadConfig(function(){showLists()})}function getListById(e){for(var t=0;t<config.lists.length;t++){var i=config.lists[t];if(i.ID==e)return i}}function getListByName(e){for(var t=0;t<config.lists.length;t++){var i=config.lists[t];if(i.Name===e)return i}}function createSelectorDiv(){function a(n,r,s){return n.className+=" RRPcollapse",n.selection=n.cc("div"),n.values=n.cc("div"),n.elements={},r&&(r.onchange=function(){n.elements[this.value].onclick()}),n.selection.onclick=function(){n.hasClass("RRPcollapse")?n.removeClass("RRPcollapse"):n.collapse()},n.select=function(e){for(var t,i=0;i<n.values.childNodes.length;i++)n.values.childNodes[i].value==e?(t=s||"",t+=""!=t&&t.indexOf(":")<0?": ":" ",n.selection.clear(t+n.values.childNodes[i].textContent),n.values.childNodes[i].className="selected"):n.values.childNodes[i].className="";r&&(r.value=e)},n.collapse=function(){this.addClass("RRPcollapse")},n.addValue=function(e,t,i){var s;return n.elements[e]||(s=n.values.cc("div"),(n.elements[e]=s).at(Text(t)),s.value=e,s.onclick=function(){n.select(this.value),n.collapse(),r&&(r.value=this.value),i&&i(this.value)},s=new Option(Text(t),e,!1,!1),r&&(r.options[r.options.length]=s)),n.elements[e]},n.value=function(){return r.value},n.selectedElement=function(){for(var e=0;e<n.values.childNodes.length;e++)if(n.values.childNodes[e].value==r.value)return n.values.childNodes[e]},n.firstElement=function(){return n.values.childNodes[0]},n.clear=function(){n.values.clear(),n.elements={},r&&(r.options.length=0)},n.destroy=function(){r&&r.parentNode&&r.parentNode.parentNode&&r.parentNode.parentNode.removeChild(r.parentNode),n.parentNode.removeChild(n)},n}var e,l,d=ce("div"),c=(d.className="SelectorParent",1===countLists()&&(d.className+=" OnlyOneList"),d.getExtraLevel=function(e,t,i){var s,n;return d.extraLevel||(d.extraLevel=[]),d.extraLevel[e]||(s=c.cc("div"),t&&(s.cc("span").at(t),s.className="hasLabel",i||c.addClass("hasLabel")),s=s.cc("select"),n=u.cc("div"),-1==e&&(s.className="selectorResult",n.className="selectorResult"),d.extraLevel[e]=a(n,s,t)),u.className="SelectorMenu count"+u.childNodes.length,t&&!i&&(this.hasSelectorLabel=!0),tMain&&tMain.setClass(),this.extraLevel[e]},d.clearExtraLevels=function(){if(d.extraLevel)for(var e in d.extraLevel)d.extraLevel[e]&&d.extraLevel[e].destroy&&(d.extraLevel[e].destroy(),delete d.extraLevel[e]);u.className="SelectorMenu count"+u.childNodes.length,c.removeClass("hasLabel"),this.hasSelectorLabel=!1,tMain&&tMain.setClass()},d.filterCount=function(){return u.childNodes.length},d.cc("div")),u=(c.className="Selector",d.cc("div"));if(u.className="SelectorMenu","dropdown"===config.ListSelector){for(var t=c.cc("div"),i=(t.cc("span").at(langItems.Contest),e=a(u.cc("div"),t.cc("select")),-1),s=0;s<config.lists.length;s++){var n,r,o=config.lists[s];o.Mode||(o.Mode=""),(0<=o.Format.indexOf("V")||0<=o.Format.indexOf("P"))&&""==o.Mode&&o.Contest!=i&&(i=o.Contest,n=0==o.Contest?langItems.allContests:Text(config.contests[o.Contest]),1===countLists(o.Contest)&&(o.ShowAs||(o.ShowAs=o.Name,0<=(r=o.ShowAs.indexOf("|"))&&(o.ShowAs=o.ShowAs.substr(r+1))),"-"!==o.ShowAs)&&("\\n"===o.ShowAs.substr(o.ShowAs.length-2)?n+=" » "+Text(o.ShowAs.substr(0,o.ShowAs.length-2)):n+=" » "+Text(o.ShowAs)),e.addValue(o.Contest,n,function(e){if(v(currContest=e),l)l.selectedElement()?l.selectedElement().onclick():l.firstElement()&&l.firstElement().onclick();else for(var t=0;t<config.lists.length;t++){var i=config.lists[t];i.Mode||(i.Mode=""),(0<=i.Format.indexOf("V")||0<=i.Format.indexOf("P"))&&""==i.Mode&&i.Contest==e&&(0<=i.Format.indexOf("V")?showList(i.ID,e):window.open(rrp_server+"/"+eventid+"/RRPublish/data/pdf?name="+encodeURIComponent(i.Name)+"&contest="+e+"&lang="+rrp_lang))}}))}e.values.childNodes.length<=1&&(e.destroy(),e=null),null!=currContest&&(e&&e.select(currContest),v(currContest)),currList&&l&&l.select(currList.ID)}function v(e){if(d.clearExtraLevels(!0),"dropdown"===config.ListSelector){l&&(t=l.selectedElement().textContent,l.destroy());for(var t,i,s=c.cc("div"),n=(s.cc("span").at(langItems.List),s.lastChild.className="SelectorLabel",l=a(u.cc("div"),s.cc("select")),0);n<config.lists.length;n++){var r,o=config.lists[n];o.Mode||(o.Mode=""),(0<=o.Format.indexOf("V")||0<=o.Format.indexOf("P"))&&""==o.Mode&&o.Contest==e&&(o.ShowAs||(o.ShowAs=o.Name,0<=(r=o.ShowAs.indexOf("|"))&&(o.ShowAs=o.ShowAs.substr(r+1))),ShowAs="\\n"===o.ShowAs.substr(o.ShowAs.length-2)?Text(o.ShowAs.substr(0,o.ShowAs.length-2)):Text(o.ShowAs),l.addValue(o.ID,ShowAs,function(e){d.clearExtraLevels(!0);var t=getListById(e);0<=t.Format.indexOf("V")?showList(e,currContest):window.open(rrp_server+"/"+eventid+"/RRPublish/data/pdf?name="+encodeURIComponent(t.Name)+"&contest="+currContest+"&lang="+rrp_lang)}),ShowAs==t)&&(i=o.ID)}i&&l.select(i),l.values.childNodes.length<=1&&(l.destroy(),l=null)}u.className="SelectorMenu count"+u.childNodes.length}return divSelector=d}function showSelector(){divSelector||parent.insertBefore(createSelectorDiv(),divLoading)}function showList(e,t,i,s){if(t=val(t),groupFilter=[],selectorResult=void 0,openedGroups={},openedParticipants=[],s||setAnchor("#"+t+"_"+e+(i?"_"+encodeURIComponent(i):"")),showLoading(!0),document.body.addClass("rrp_ShowingList"),currList&&currList.ID!=e&&(favOnly=!1),!(currList=getListById(e)))return showLists(),!1;self.LiveUpdate.Stop(),groupFilter=[],currContest=t,clearParent(),showSelector();var s=createDivListControl(currList,t),e=(parent.insertBefore(s,divSelector||divLoading),favOnly?"favorites":currList.Leader?"leaders":"all"),n=++lastRequestID;return Get(rrp_server+"/"+eventid+"/RRPublish/data/list",{key:config.key,listname:currList.Name,page:page,contest:currContest,r:e,l:currList.Leader,fav:getCookie("favs"+eventid)}).then(function(e){lastRequestID===n&&(setDataCols(e),listFormat=(currListData=e).list,listGroupingColWidths=calcListGroupingColWidths(e.data,0),listColWidths=calcListColWidths(e.data,0),determineColsAndLines(listFormat),determineHiddenCols(),createFilterMenues(e.groupFilters,listFormat.SelectorResults),buildList(e),void 0!==i?search(i):lastSearchTerm=void 0===i?"":i)}).catch(function(e){}).finally(function(){self.LiveUpdate.Start()}),!0}function createFilterMenues(e,t){function i(e,t,i,s){""==i&&(i=-1==t?"<"+langItems.CurrentResult+">":t),e.addValue(t,i,function(e){selectorResult=s?void 0:t,reloadList()})}function s(e,t){e.Orders||(e.Orders=[]);for(var i=0;i<e.Orders.length;i++)if(0<=e.Orders[i].Expression.toLowerCase().indexOf(t))return!0;e.Fields||(e.Fields=[]);for(i=0;i<e.Fields.length;i++)if(0<=e.Fields[i].Expression.toLowerCase().indexOf(t)||0<=e.Fields[i].DynamicFormat.toLowerCase().indexOf(t))return!0;e.Filters||(e.Filters=[]);for(i=0;i<e.Filters.length;i++)if(0<=e.Filters[i].Expression1.toLowerCase().indexOf(t)||0<=e.Filters[i].Expression2.toLowerCase().indexOf(t))return!0;return 0<=e.LineDynamicFormat.toLowerCase().indexOf(t)}divSelector.clearExtraLevels();var n=-1;menuListFilterContest=null,e=e||[];for(var r,o,a=0;a<listFormat.Orders.length;a++)listFormat.Orders[a].Grouping&&(n++,1<listFormat.Orders[a].Grouping)&&e[n]&&(o=2==listFormat.Orders[a].Grouping||3==listFormat.Orders[a].Grouping,r=3==listFormat.Orders[a].Grouping,o=function(e,t,i,s,n,r){if(e.Values||(e.Values=[]),!(e.Values.length<=1)){for(var o,a,l=divSelector.getExtraLevel(t,Text(r)),d=!1,c=-2;c<e.Values.length;c++)!i&&-1===c||!s&&-2===c||(-2===c?(o="<Ignore>",a=2===e.Type,r="<"+langItems.FilterIgnore+">"):-1===c?(o="",a=0===e.Type,r="<"+langItems.FilterAll+">"):(o=e.Values[c],a=e.Value===o,""==(r=Text(o))&&(r="-"),""==o&&(o="(empty)")),l.addValue(o,r,function(e){groupFilter[t]=e,openedGroups={},openedParticipants=[],reloadList()}),d)||!a||(l.select(o),groupFilter[t]=o,d=!0);return l}2==n&&s&&(groupFilter[t]="<Ignore>")}(e[n],n,o,r,listFormat.Orders[a].GroupFilterDefault,listFormat.Orders[a].GroupFilterLabel),"contestname"!==listFormat.Orders[a].Expression.toLowerCase()&&"contest.name"!==listFormat.Orders[a].Expression.toLowerCase()||(menuListFilterContest=o));var l=[s(listFormat,"{selector}"),!1,!1];if(l[0]?(l[1]=!0,l[2]=!0):(l[1]=s(listFormat,"{selector.splits}"),l[2]=s(listFormat,"{selector.legs}")),l[0]||l[1]||l[2]){var d=divSelector.getExtraLevel(-1,l[0]?langItems.SplitLeg:l[1]?langItems.Split:langItems.Leg,!0),c=[],u=currContest;if(!u&&menuListFilterContest){var v,p=menuListFilterContest.value();for(v in config.contests)if(config.contests[v]==p){u=v;break}}(l[0]||l[1])&&i(d,"","<"+langItems.CurrentResult+">",!1);for(var h=0;h<2;h++)for(var f=0;f<config.splits.length;f++){var m=config.splits[f];0==m.Contest||0<=c.indexOf(m.Name)||u&&m.Contest!=u||2==m.SplitType||9==m.SplitType&&0==h||9!=m.SplitType&&0!=h||(l[0]||l[1]&&9!=m.SplitType||l[2]&&9==m.SplitType)&&(i(d,m.Name,m.Label?Text(m.Label):m.Name,!1),c.push(m.Name))}selectorResult?d.select(selectorResult):d.select(d.firstElement().value)}else if(t&&1<t.length&&s(listFormat,"selectortime")){for(d=divSelector.getExtraLevel(-1),f=0;f<t.length;f++)i(d,t[f].ResultID,t[f].ShowAs,0===f);selectorResult?d.select(selectorResult):d.select(d.firstElement().value)}}function reloadList(){(s=divMainDiv&&divMainDiv.parentNode?divMainDiv.parentNode:s)&&(s.style.minHeight=s.offsetHeight+"px"),removeList(),showLoading(!0);var s,e=lastSearchTerm?"search":favOnly?"favorites":currList.Leader?"leaders":"all",n=++lastRequestID;Get(rrp_server+"/"+eventid+"/RRPublish/data/list",{key:config.key,listname:currList.Name,page:page,contest:currContest,r:e,l:currList.Leader,fav:getCookie("favs"+eventid),openedGroups:JSON.stringify(openedGroups),term:lastSearchTerm,selectorResult:selectorResult,f:groupFilter.length?groupFilter.join("\f"):void 0}).then(function(e,t,i){lastRequestID===n&&(e.list&&(setDataCols(e),listFormat=(currListData=e).list,listGroupingColWidths=calcListGroupingColWidths(e.data,0),listColWidths=calcListColWidths(e.data,0),determineColsAndLines(listFormat),determineHiddenCols(),createFilterMenues(e.groupFilters,listFormat.SelectorResults,groupFilter),buildList(e),showLoading(!1)),s)&&(s.style.minHeight=0)}).catch(function(e){}).finally(function(){self.LiveUpdate.Start()})}function removeList(){divMainDiv&&divMainDiv.parentNode&&divMainDiv.parentNode.removeChild(divMainDiv),divListHeader&&divListHeader.parentNode&&divListHeader.parentNode.removeChild(divListHeader),divListFooter&&divListFooter.parentNode&&divListFooter.parentNode.removeChild(divListFooter),divPoweredBy&&divPoweredBy.parentNode&&(divPoweredBy.parentNode.removeChild(divPoweredBy),divPoweredBy=null)}function setDataCols(e){for(var t={},i=0;i<e.DataFields.length;i++)t[e.DataFields[i]]=i;for(i=0;i<e.list.Fields.length;i++)e.list.Fields[i].DataCol=t[e.list.Fields[i].Expression],e.list.Fields[i].LinkCol=t[e.list.Fields[i].Link],e.list.Fields[i].DynamicFormatCol=t[e.list.Fields[i].DynamicFormat];e.list.LineDynamicFormatCol=t[e.list.LineDynamicFormat],e.list.IDCol=t.ID}function buildList(e){removeList(),e.list.ListHeaderText&&(divListHeader=parent.cc("div"),parent.HeaderNode=divListFooter,divListHeader.className="ListHeaderFooter",0<=e.list.ListHeaderText.indexOf("<")?divListHeader.innerHTML=Text(e.list.ListHeaderText):divListHeader.at(Text(e.list.ListHeaderText))),createDivTMain(),createTableHeader(e.list),processPiece(e.data,e.comments,0,0),currListMID=e.mid,e.list.ListFooterText&&(divListFooter=parent.cc("div"),(parent.FooterNode=divListFooter).className="ListHeaderFooter",0<=e.list.ListFooterText.indexOf("<")?divListFooter.innerHTML=Text(e.list.ListFooterText):divListFooter.at(Text(e.list.ListFooterText))),currList.Sortable&&1===currListLines&&0===hiddenCols.length&&makeSortable(tMain),addPoweredBy(),tMain.style.display="",showLoading(!1)}function createTableHeader(e){for(var t=e.Fields,i=tMain.cc("thead"),s=1;s<=currListLines;s++){for(var n=!1,r=ce("tr"),o=((c=r.cc("th")).innerHTML="&nbsp;",c.className="sorter-false",1),a=0;a<t.length;a++)if(t[a].Line===s&&(1===s||!hideAddLines)&&hiddenCols.indexOf(a)<0){var l=Text(t[a].Label);if(l&&(n=!0),0===hiddenCols.length)for(var d=1;d<=t[a].ColOffset;d++)(c=r.cc("th")).innerHTML="&nbsp;",c.className="sorter-false",o++;var c=r.cc("th"),u=1,u=(0===hiddenCols.length&&1<t[a].ColSpan&&(u=t[a].ColSpan,c.colSpan=u),o+=u,c.at(l),t[a].Label2&&(c.cc("br"),c.at(t[a].Label2)),t[a].Expression.toLowerCase());c.className="timetext"===u.substr(0,8)||0<=u.indexOf("[timetext")?"{sorter:'time'}":"sorter-text",1==t[a].Alignment?c.style.textAlign="left":2==t[a].Alignment?c.style.textAlign="center":3==t[a].Alignment&&(c.style.textAlign="right")}if(0===hiddenCols.length)for(d=1;d<=currListCols-o;d++)(c=r.cc("th")).innerHTML="&nbsp;",c.className="sorter-false";(c=r.cc("th")).innerHTML="&nbsp;",c.className="sorter-false",n&&i.ac(r)}}function createDivTMain(){(divMainDiv=parent.ac(ce("div"))).className="MainDiv",(tMain=divMainDiv.cc("table")).style.display="none",tMain.setClass=function(){tMain.className="MainTable tablesorter tablesorter-default",(hiddenCols.length||hideAddLines)&&(tMain.className+=" hasBrokeCols"),divSelector&&divSelector.filterCount()?(parent.addClass("HasSelector"),parent.addClass("FilterCount"+divSelector.filterCount())):(parent.removeClass("HasSelector"),parent.removeClass("FilterCount1"),parent.removeClass("FilterCount2"),parent.removeClass("FilterCount3"),parent.removeClass("FilterCount4"),parent.removeClass("FilterCount5")),divSelector&&divSelector.hasSelectorLabel?parent.addClass("HasSelectorLabel"):parent.removeClass("HasSelectorLabel")},tMain.setClass()}function addPoweredBy(){var e,t,i;divPoweredBy&&!document.body.contains(divPoweredBy)&&(divPoweredBy=null),window.location.href.indexOf(".raceresult.com/")<0&&!divPoweredBy&&((divPoweredBy=parent.cc("div")).style.visibilty="visible",divPoweredBy.style.position="static",divPoweredBy.style.display="block",divPoweredBy.style.setProperty("opacity","100%","important"),divPoweredBy.style.setProperty("display","block","important"),divPoweredBy.style.textAlign="left",divPoweredBy.style.marginTop="10px",divPoweredBy.style.borderTop="1px solid #CCCCCC",divPoweredBy.style.fontSize="12px",divPoweredBy.style.padding="2px 0 10px 1%",divPoweredBy.style.border=0,self.ShowTimerLogo&&config.TimerLogo&&((e=divPoweredBy.cc("img")).src=rrp_server+"/"+eventid+"/RRPublish/picture.php?name="+encodeURIComponent(config.TimerLogo),e.style.maxHeight="30px",e.style.marginRight="10px",e.style.verticalAlign="middle",e.border=0,t=config.TimerURL)&&("http"!==t.substr(0,4)&&(t="http://"+t),e.link=t,e.onclick=function(){window.open(this.link)}),(i=ce("div")).onclick=function(){window.open("https://www.raceresult.com")},divPoweredBy.fix=function(e){e||divPoweredBy.parentNode&&divPoweredBy.firstChild&&i.parentNode?(divPoweredBy.set=function(e,t){this.style.getPropertyValue(e)!==t&&this.style.setProperty(e,t,"important")},divPoweredBy.set("display","block"),i.set=function(e,t){this.style.getPropertyValue(e)!==t&&this.style.setProperty(e,t,"important")},i.set("display","inline-block"),i.set("background-image","url('"+rrp_server+"/RRPublish/graphics/RR_PoweredBy_LightGrey_RGB.png')"),i.set("background-repeat","no-repeat"),i.set("background-size","contain"),i.set("margin-left","7px"),i.set("mix-blend-mode","difference"),i.set("cursor","pointer"),i.set("height","30px"),i.set("width","150px"),i.set("opacity","1"),i.set("vertical-align","middle"),i.set("visiblity","visible")):(divPoweredBy=null,addPoweredBy())},divPoweredBy.fix(!0),divPoweredBy.ac(i),(mutationObserver=new MutationObserver(function(){divPoweredBy.parentNode&&divPoweredBy.parentNode.removeChild(divPoweredBy),divPoweredBy=null,addPoweredBy()})).observe(divPoweredBy,{attributes:!0,subtree:!0}))}function createDivListControl(e,t){var i=ce("div"),s=(i.className="ListControl",1!==countLists()&&"dropdown"!==config.ListSelector||(i.className+=" OnlyOneList"),i.onclick=function(){Cancel()},"dropdown"===config.ListSelector&&(i.className+=" HasSelector"),currList.Live&&!config.EventOver&&(i.className+=" ListControlWithLiveUpdate"),i.cc("div"));s.className="ListBack",s.at(langItems.detailsBack),s.onclick=function(e){Cancel(e),removeList(),showLists()},currList.Live&&!config.EventOver&&(s=i.cc("div"),(parent.RRLiveUpdate=s).className="RRLiveUpdate",s.at(langItems.liveUpdateActive)),0<=getListById(e.ID).Format.indexOf("P")&&((s=i.cc("div")).className="ListControlPDF",s.href=rrp_server+"/"+eventid+"/RRPublish/data/pdf?name="+encodeURIComponent(e.Name)+"&contest="+t+"&lang="+rrp_lang,s.onclick=function(){window.open(this.href)},s.at(" "+langItems.pdfResults));(s=i.cc("div")).className="ListControlSearch";e=s.cc("input");(inpSearch=e).type="text",e.placeholder=langItems.searchPlaceHolder,e.onfocus=function(){this.parentNode.parentNode.addClass("SearchFocus")},e.onblur=function(){search(this.value)},e.oninput=function(e){this.onkeyup()},e.onkeyup=function(e){this.check(),!e||13!=e.keyCode||this.nextSibling.disabled&&""!=this.value||(search(this.value),document.activeElement.blur())},e.check=function(){this.value||this.parentNode.parentNode.removeClass("SearchFocus"),this.className=this.value?"filled":"";var e=this.value.length<2&&!IsNumeric(this.value);this.nextSibling.disabled=e},(e=s.cc("button")).className="btnSearch",e.onclick=function(){search(this.previousSibling.value)},e.at(langItems.search),e.disabled=!0;(e=s.cc("button")).className="btnClearSearch",e.onclick=function(){var e=this.previousSibling.previousSibling;e.value="",e.check(),search("")};t=e.cc("img");return t.src=rrp_server+"/RRPublish/graphics/whiteX.png",t.style.height="14px",(e=s.cc("button")).className="btnFavorites",e.innerHTML="&nbsp;",e.title=langItems.showFavorites,favOnly&&(e.className+=" checked"),e.onclick=function(){if(favOnly=!favOnly,lastSearchTerm=void 0,inpSearch&&(inpSearch.value="",inpSearch.check()),favOnly){this.oldGroupFilter=groupFilter.slice(0);for(var e=0;e<groupFilter.length;e++)groupFilter[e]=""}else for(e=0;e<groupFilter.length;e++)""==groupFilter[e]&&(groupFilter[e]=this.oldGroupFilter[e]);openedGroups={},openedParticipants=[],this.toggleClass("checked"),reloadList()},(s=i.cc("div")).style.clear="both",i}function CreateFavoriteMarker(t,i){var s=ce("div");return self.Favorites.Is(t)?(s.className="Favorite",s.at(langItems.detailsFav)):(s.className="NoFavorite",s.at(langItems.detailsNoFav)),s.onclick=function(e){e.stopPropagation(),"Favorite"===this.className?(this.className="NoFavorite",self.Favorites.Set(t,!1),s.clear(langItems.detailsNoFav),i.FavoriteButton&&i.FavoriteButton!==this&&(i.FavoriteButton.className="NoFavorite")):(this.className="Favorite",self.Favorites.Set(t,!0),s.clear(langItems.detailsFav),i.FavoriteButton&&i.FavoriteButton!==this&&(i.FavoriteButton.className="Favorite")),i.toggleClass("Favorite")},s}function CreateCommentsInfo(e){var t=ce("div");return t.className="CommentInfo",e=e||0,t.at(langItems.CommentsInfo.replace("[x]",e)),t}function processPiece(e,i,s,n,r,o,a){var l=!1;if(void 0===o&&(l=!(o="")),void 0===a&&(a="tb"),isArray(e))if(0===e.length)(r=tMain.cc("tbody")).className="tablesorter-no-sort",(y=(f=r.cc("tr")).cc("td")).height="150px",y.colSpan=currListCols+1-hiddenCols.length,y.style.fontStyle="italic",y.style.textAlign="center",y.at(langItems.noEntries);else{r&&(r.RecordCount=0);for(var d=0;d<e.length;d++){var c,u=e[d];if(u)if(1===u.length)e.length-1<u[0]&&r&&(c=ce("tbody"),r.nextSibling?(c=ce("tbody"),r.parentNode.insertBefore(c,r.nextSibling)):c=r.parentNode.cc("tbody"),c.className="tablesorter-no-sort",(y=(f=c.cc("tr")).cc("td")).colSpan=currListCols+1-hiddenCols.length,y.style.textAlign="right",y.tb=r,currList.Leader)&&(e.length+100<u[0]&&((R=y.cc("a")).className="aShowAll",R.style.marginRight="20px",R.onclick=function(){this.parentNode.loadAllOrMore(!0)},R.at(langItems.showMore)),(R=y.cc("a")).className="aShowAll",R.onclick=function(){this.parentNode.loadAllOrMore(!1)},config.LeaderboardHideCount?R.at(langItems.showAll.replace("[x]","")):R.at(langItems.showAll.replace("[x]",u[0])),y.loadAllOrMore=function(e){this.childNodes[0].style.display="none",this.childNodes[1]&&(this.childNodes[1].style.display="none");var t=this.cc("div"),i=(t.className="Loading",t.style.height="80px",this);r.loadAllOrMore(e,function(e){t.parentNode.removeChild(t),e?i.parentNode.parentNode.parentNode.removeChild(i.parentNode.parentNode):(i.childNodes[0].style.display="",i.childNodes[1]&&(i.childNodes[1].style.display=""))})});else{for(var v,p=0!==hiddenCols.length||hideAddLines?1:currListLines,h=1;h<=p;h++){var f=ce("tr"),m=(1===h&&(v=f),f.className="Hover",h===p&&(f.className+=" LastRecordLine"),1<h&&(f.className+=" MultiLine"),f.pid=u[listFormat.IDCol],f.arrPointer=u,listFormat.LineColor&&(f.style.color=listFormat.LineColor),listFormat.LineBackColor&&(f.style.backgroundColor=listFormat.LineBackColor),hiddenCols.length||hideAddLines?(f.style.cursor="pointer",0<=openedParticipants.indexOf(f.pid)&&(f.className+=" open"),f.onclick=function(){var e;this.hasClass("open")?(0<=(e=openedParticipants.indexOf(this.pid))&&openedParticipants.splice(e,1),this.removeClass("open")):(openedParticipants.push(this.pid),this.addClass("open"))}):config.LinkCertificates&&(f.style.cursor="pointer",f.onclick=function(){for(var e=this;e.hasClass("MultiLine");)e=e.previousSibling;currArrPointer=e.arrPointer,currDetailsTR=e,self.DetailsWindow.show(e.pid)}),"");listFormat.LineDynamicFormat&&(m=u[listFormat.LineDynamicFormatCol]);setDynamicFormat(y=f.cc("td"),m),"results"!==page&&"live"!==page||"1"==config.DisableiComments||1!=h||(y.commentCount=0,i[u[listFormat.IDCol]]?(y.commentCount=i[u[listFormat.IDCol]],y.className="Comments1",y.title=langItems.CommentsInfo.replace("[x]",y.commentCount)):y.className="Comments0");for(var g=0,C=0;C<listFormat.Fields.length;C++)if((F=listFormat.Fields[C]).Line===h&&(1===h||!hideAddLines)&&hiddenCols.indexOf(C)<0){if(0===hiddenCols.length)for(var L=1;L<=F.ColOffset;L++)f.cc("td").at(" "),g++;var y=f.cc("td"),S=1;0===hiddenCols.length&&1<F.ColSpan&&(S=F.ColSpan,y.colSpan=S),g+=S,F.FontBold&&(y.style.fontWeight="bold"),F.FontItalic&&(y.style.fontStyle="italic"),F.FontUnderlined&&(y.style.textDecoration="underline"),1==F.Alignment?y.style.textAlign="left":2==F.Alignment?y.style.textAlign="center":3==F.Alignment&&(y.style.textAlign="right"),F.Color&&(y.style.color=F.Color),""==(P=Text(u[F.DataCol]))&&(P=" "),F.Link?((R=y.cc("a")).at2(P),setLink(R,u[F.LinkCol])):"["===P.substr(0,1)&&"]"===P.substr(P.length-1,1)&&0<P.indexOf("|")&&"[img"!==P.substr(0,4).toLowerCase()?self.TimeUpdater.AddField(y,P):y.at2(P),m&&setDynamicFormat(y,m),F.DynamicFormat&&setDynamicFormat(y,u[F.DynamicFormatCol])}if(0===hiddenCols.length)for(C=1;C<=currListCols-g-1;C++)f.cc("td").at(" ");setDynamicFormat(y=f.cc("td"),m),1==h&&(hiddenCols.length||hideAddLines||(y.pid=u[listFormat.IDCol],y.title=langItems.markFavorite,y.onclick=function(e){e.stopPropagation(),this.parentNode.toggleClass("Favorite"),self.Favorites.Set(this.pid,this.parentNode.hasClass("Favorite"))}),self.Favorites.Is(u[listFormat.IDCol]))&&f.addClass("Favorite"),y.at(" "),r||((r=tMain.cc("tbody")).groupName="",r.RecordCount=0,createLoadAll(r)),r.ac(f)}if(r.RecordCount++,hiddenCols.length||hideAddLines){(b=r.cc("tr")).className="brokeCols",config.LinkCertificates&&(b.className+=" withDetails"),b.pid=u[listFormat.IDCol],b.arrPointer=u,listFormat.LineColor&&(b.style.color=listFormat.LineColor),listFormat.LineBackColor&&(b.style.backgroundColor=listFormat.LineBackColor),config.LinkCertificates&&(b.style.cursor="pointer",b.onclick=function(){currArrPointer=this.arrPointer,currDetailsTR=this.previousSibling,self.DetailsWindow.show(this.pid)}),listFormat.LineDynamicFormat&&setDynamicFormat(f,u[listFormat.LineDynamicFormatCol]),b.cc("td");for(var b,w=b.cc("td"),h=(w.colSpan=currListCols-hiddenCols.length,1);h<=currListLines;h++)for(var F,N,R,g=0,C=0;C<listFormat.Fields.length;C++)(F=listFormat.Fields[C]).Line===h&&0,F.Line===h&&(1<h||0<=hiddenCols.indexOf(C))&&(g++,N=w.cc("div"),F.FontBold&&(N.style.fontWeight="bold"),F.FontItalic&&(N.style.fontStyle="italic"),F.FontUnderlined&&(N.style.textDecoration="underline"),F.Color&&(N.style.color=F.Color),y=N.cc("div"),(P=Text(F.Label))&&y.at(P+": "),y=N.cc("div"),P=Text(u[F.DataCol]),F.Link?((R=y.cc("a")).at2(P),setLink(R,u[F.LinkCol])):"["===P.substr(0,1)&&"]"===P.substr(P.length-1,1)&&0<P.indexOf("|")&&"[img"!==P.substr(0,4).toLowerCase()?self.TimeUpdater.AddField(y,P):y.at2(P),F.DynamicFormat)&&setDynamicFormat(y,u[F.DynamicFormatCol]);(b=r.cc("tr")).className="brokeColsButtons",b.cc("td"),(w=b.cc("td")).colSpan=currListCols-hiddenCols.length,v.FavoriteButton=CreateFavoriteMarker(u[listFormat.IDCol],v),w.ac(v.FavoriteButton),config.LinkCertificates&&!config.DisableiComments&&(v.CommentInfo=CreateCommentsInfo(i[u[listFormat.IDCol]]),w.ac(v.CommentInfo))}}}l||((c=r.parentNode.cc("tbody")).id=a+"Spacer",c.className="tablesorter-no-sort",(y=(f=c.cc("tr")).cc("td")).style.height="10px",y.colSpan=currListCols+1-hiddenCols.length)}else{for(;"<Ignore>"===groupFilter[n];)n++;var x=0;for(d in e){if(x++,(r=tMain.cc("tbody")).id=a+"_"+x,"_empty_"!=d&&(!isFilterGrouping(listFormat,n)||""===groupFilter[n]||void 0===groupFilter[n])){var D=d;if("#"===D.substr(0,1)&&1<(t=D.indexOf("_"))&&(D=D.substr(t+1)),(y=(f=r.cc("tr")).cc("td")).className="listGrouping",y.colSpan=currListCols+2-hiddenCols.length,setListGroupingStyle(listFormat,n,y),0<=D.indexOf("///"))for(var I=D.split("///"),h=0;h<I.length;h++){var P,T=y.cc("div");T.style.cssFloat="left",T.style.width=listGroupingColWidths[s][h]+"%",""===(P=Text(I[h]))?T.innerHTML="&nbsp;":T.at2(P)}else y.at(Text(D))}(r=tMain.cc("tbody")).groupName=o+d,r.id=a+"_"+x+"Data",createLoadAll(r),processPiece(e[d],i,s+1,n+1,r,r.groupName+"\f",a+"_"+x)}l&&tMain.lastChild&&tMain.removeChild(tMain.lastChild)}}function setListGroupingStyle(e,t,i){for(var s=-1,n=0;n<e.Orders.length;n++)if(e.Orders[n].Grouping&&s++,s==t)return e.Orders[n].Color&&(i.style.color=e.Orders[n].Color),void(e.Orders[n].BackgroundColor&&(i.style.backgroundColor=e.Orders[n].BackgroundColor))}function isFilterGrouping(e,t){for(var i=-1,s=0;s<e.Orders.length;s++)if(e.Orders[s].Grouping&&i++,i==t)return 1<e.Orders[s].Grouping}function calcListGroupingColWidths(e,i){if(0===i&&(lenSum=[]),!isArray(e))for(var s in lenSum[i]||(lenSum[i]=[]),e){if(0<=s.indexOf("///"))for(var n=s,r=(n="#"===n.substr(0,1)&&1<(t=n.indexOf("_"))?n.substr(t+1):n).split("///"),o=0;o<r.length;o++)lenSum[i][o]||(lenSum[i][o]=0,lenSum[i][-o-1]=0),r[o].length&&(lenSum[i][o]+=r[o].length,lenSum[i][-o-1]++);calcListGroupingColWidths(e[s],i+1)}if(0===i){for(var a=0;a<lenSum.length;a++)for(s=0;s<lenSum[a].length;s++)0<lenSum[-a-1]&&(lenSum[a]/=lenSum[-a-1]);for(a=0;a<lenSum.length;a++){for(var l=0,s=0;s<lenSum[a].length;s++)l+=lenSum[a][s];0===l&&(l=1);for(s=0;s<lenSum[a].length;s++)lenSum[a][s]=100*lenSum[a][s]/l}return lenSum}}function calcListColWidths(e,t){if(0===t&&(lenSum=[]),0===t&&(maxWordLen=[]),isArray(e)){for(var i=0;i<e.length;i++)if(e[i])for(var s=1;s<e[i].length;s++){lenSum[s]||(lenSum[s]=0,lenSum[-s]=0,maxWordLen[s]=0);n=e[i][s];n="]"===(n+="").substr(n.length-1)&&"[img:"===n.substr(0,5).toLowerCase()?5:(n=Text(n).trim())==n.toUpperCase()?1.5*n.length:n.length;n&&(lenSum[s]+=n,lenSum[-s]++,n>maxWordLen[s])&&(maxWordLen[s]=Math.max(maxWordLen[s],function(e){var t=0;if("]"===(e+="").substr(e.length-1)&&"[img:"===e.substr(0,5).toLowerCase())return 5;for(var i=Text(e).split(" "),s=0;s<i.length;s++)i[s].length>t&&(t=i[s].length);return t}(e[i][s])))}}else for(var i in e)calcListColWidths(e[i],t+1);var n;if(0===t){for(var r=[],s=0;s<listFormat.Fields.length;s++){for(var o=listFormat.Fields[s].DataCol,a=0,l=(lenSum[o]&&(a=lenSum[o]/lenSum[-o]),Text(listFormat.Fields[s].Label).split(" ")),d=0;d<l.length;d++)a=Math.max(a,l[d].length);r.push(a)}return r}}function createLoadAll(n){n.loadAllOrMore=function(e,t){mutationObserver&&mutationObserver.disconnect();var i,s=void 0;e?(s=n.RecordCount+100,openedGroups[this.groupName]=s):openedGroups[this.groupName]=99999999,listColWidths&&listColWidths.length?(i=++lastRequestID,Get(rrp_server+"/"+eventid+"/RRPublish/data/list",{key:config.key,listname:currList.Name,page:page,contest:currContest,fav:getCookie("favs"+eventid),r:"group",name:this.groupName,selectorResult:selectorResult,l:s,f:groupFilter.length?groupFilter.join("\f"):void 0}).then(function(e){lastRequestID===i&&(n.clear(),setDataCols(e),processPiece(e.data,e.comments,0,0,n),t)&&t(!0)}).catch(function(){t&&t(!1)})):reloadList()}}function search(e){if(lastSearchTerm!==e){if(""===(lastSearchTerm=e)){for(var t=0;t<groupFilter.length;t++)""==groupFilter[t]&&(groupFilter[t]=this.oldGroupFilter[t]);return reloadList()}this.oldGroupFilter=groupFilter.slice(0);for(t=0;t<groupFilter.length;t++)"<Ignore>"!=groupFilter[t]&&(groupFilter[t]="");openedGroups={},divMainDiv&&(divMainDiv.style.display="none"),divListHeader&&(divListHeader.style.display="none"),divListFooter&&(divListFooter.style.display="none"),showLoading(!0);var i=++lastRequestID;Get(rrp_server+"/"+eventid+"/RRPublish/data/list",{key:config.key,listname:currList.Name,page:page,fav:getCookie("favs"+eventid),contest:currContest,r:"search",term:e,f:groupFilter.join("\f")}).then(function(e){lastRequestID===i&&(setDataCols(e),listFormat=(currListData=e).list,listGroupingColWidths=calcListGroupingColWidths(e.data,0),listColWidths=calcListColWidths(e.data,0),determineColsAndLines(listFormat),determineHiddenCols(),createFilterMenues(e.groupFilters,listFormat.SelectorResults,groupFilter),buildList(e),self.LiveUpdate.Start(),divMainDiv.style.display="")}).catch(function(e){alert("Loading failed, please try again. ("+e+")")}).finally(function(){showLoading(!1)})}}function setCookie(e,t,i){var s=new Date,t=(s.setDate(s.getDate()+i),escape(t)+(null==i?"":"; expires="+s.toUTCString())+"; path=/");document.cookie=e+"="+t}function getCookie(e){for(var t,i,s=document.cookie.split(";"),n=0;n<s.length;n++)if(t=s[n].substr(0,s[n].indexOf("=")),i=s[n].substr(s[n].indexOf("=")+1),(t=t.replace(/^\s+|\s+$/g,""))==e)return unescape(i)}function showLoading(e){if(!divLoading){if(!e)return;(divLoading=parent.cc("div")).className="Loading"}divLoading.style.display=e?"":"none"}function Text(e){if(!e)return"";if("{"!==(e+="").substr(0,1)||"}"!==e.substr(e.length-1,1))return e;rrp_lang=rrp_lang||"de";for(var t=e.substr(1,e.length-2).split("|"),i="",s="",n=0;n<t.length;n++){e=t[n].indexOf(":");if(!(e<=0)){var r=t[n].substr(0,e).toUpperCase();if((r="CZ"===r?"CS":r)==rrp_lang.toUpperCase())return t[n].substr(e+1);"EN"===r?s=t[n].substr(e+1):""==i&&(i=t[n].substr(e+1))}}return s||i}function setDynamicFormat(e,t){function i(e){var t=e.indexOf("(");return e=0<=(e=0<=(t=(e=0<=t?e.substr(t+1):e).indexOf(")"))?e.substr(0,t):e).indexOf(",")?"rgb("+e+")":e}function s(e){var t=e.indexOf("(");return val(e=0<=(t=(e=0<=t?e.substr(t+1):e).indexOf(")"))?e.substr(0,t):e)}if(t&&""!=t){for(t=t.split(";"),z=0;z<t.length;z++){var n=t[z].toUpperCase();"B"===n?e.style.fontWeight="bold":"I"===n?e.style.fontStyle="italic":"U"===n?e.style.textDecoration="underline":"S"===n?e.style.textDecoration="line-through":"AL"===n?e.style.textAlign="left":"AC"===n?e.style.textAlign="center":"AR"===n?e.style.textAlign="right":"C("===n.substr(0,2)?e.style.color=i(n):"BG("===n.substr(0,3)?e.style.backgroundColor=i(n):"BLC("===n.substr(0,4)?e.style.borderLeftColor=i(n):"BRC("===n.substr(0,4)?e.style.borderRightColor=i(n):"BTC("===n.substr(0,4)?e.style.borderTopColor=i(n):"BBC("===n.substr(0,4)?e.style.borderBottomColor=i(n):"BLW("===n.substr(0,4)?(e.style.borderLeftWidth=s(n)+"pt",e.style.borderLeftStyle="solid"):"BRW("===n.substr(0,4)?(e.style.borderRightWidth=s(n)+"pt",e.style.borderRightStyle="solid"):"BTW("===n.substr(0,4)?(e.style.borderTopWidth=s(n)+"pt",e.style.borderTopStyle="solid"):"BBW("===n.substr(0,4)&&(e.style.borderBottomWidth=s(n)+"pt",e.style.borderBottomStyle="solid")}e.style.borderLeftWidth&&!e.style.borderLeftColor&&(e.style.borderLeftColor="#000"),e.style.borderRightWidth&&!e.style.borderRightColor&&(e.style.borderRightColor="#000"),e.style.borderTopWidth&&!e.style.borderTopColor&&(e.style.borderTopColor="#000"),e.style.borderBottomWidth&&!e.style.borderBottomColor&&(e.style.borderBottomColor="#000")}}function ce(e,t,i){e=document.createElement(e);return t&&(e.id=t),i&&(e.name=i),e&&geiFunctions(e),e}function gei(e){e=document.getElementById(e);e&&geiFunctions(e)}function geiFunctions(i){i.ac=function(e,t){if(null!=e)if(isArray(e))for(var i in e)t?this.appendChild(ce(t)).ac(e[i]):this.appendChild(e[i]);else{if("object"==typeof e)return this.appendChild(e),e;this.appendChild(document.createTextNode(e))}},i.at=function(e){this.ac(e)},i.css=function(e,t){this.style[e]=t},i.cc=function(e,t,i){return this.ac(ce(e,t,i))};try{i.clear=function(e){for(;this.firstChild;)this.removeChild(this.firstChild);return void 0!==e&&this.ac(e),this}}catch(e){}i.at2=function(e,t){if("]"===e.substr(e.length-1)&&"[img:"===e.substr(0,5).toLowerCase()){var i=ce("img"),s=e.substr(5,e.length-6).split("|");if(s[1])for(var n=s[1].split(";"),r=0;r<n.length;r++){var o=n[r].split(":");2<=o.length&&(i.style[o[0].trim()]=o[1].trim())}else i.style.maxHeight="16px",i.style.verticalAlign="top",i.className="img16";"http"===s[0].substr(0,4)?i.src=s[0]:0<=s[0].indexOf("flags/")?i.src=rrp_server+"/graphics/"+s[0]:i.src=rrp_server+"/"+eventid+"/RRPublish/picture.php?name="+encodeURIComponent(s[0])}else{var a=e.split("\n");if(1===a.length)i=document.createTextNode(a[0]);else for(i=ce("span"),r=0;r<a.length;r++)i.ac(document.createTextNode(a[r])),r<e.length-1&&i.cc("br")}if(t)return(s=ce("b")).ac(i),this.ac(s),s;this.ac(i)},i.hasClass=function(e){return 0<=i.className.split(" ").indexOf(e)},i.addClass=function(e){i.hasClass(e)||(i.className+=" "+e)},i.removeClass=function(e){var t=i.className.split(" "),e=t.indexOf(e);e<0||(t.splice(e,1),i.className=t.join(" "))},i.toggleClass=function(e){i.hasClass(e)?i.removeClass(e):i.addClass(e)}}function share(e){var t;if("facebook"===e){var i=[];if(currArrPointer)for(var s=0;s<listFormat.Fields.length;s++){var n,r=listFormat.Fields[s];1===r.Line&&(n=currArrPointer[r.DataCol])&&i.push(Text(r.Label)+": "+n)}i=i.join(" | "),t="http://www.facebook.com/dialog/feed?app_id=1420738338247728&link="+encodeURIComponent(window.location.href)+"&picture=&name="+encodeURIComponent(Text(config.eventname))+"&caption="+encodeURIComponent("http://my.raceresult.com")+"&description="+encodeURIComponent(i)+"&display=popup&redirect_uri="+encodeURIComponent("https://my.raceresult.com/popupClose.htm")}else{if("twitter"!==e)return;t="https://twitter.com/intent/tweet?text="+encodeURIComponent(Text(config.eventname))+"&url="+encodeURIComponent(window.location.href)}window.open(t,"feedDialog","toolbar=0,status=0,width=626,height=436")}function showInfoText(){var e;config.infotext&&self.ShowInfoText&&(divRRPInfoText||((divRRPInfoText=ce("div")).className="RRPInfoText",parent.insertBefore(divRRPInfoText,parent.firstChild)),0<=(e=Text(config.infotext)).indexOf("</")?divRRPInfoText.innerHTML=e:divRRPInfoText.at(e))}function val(e){if(!e)return 0;if(""==(e+=""))return 0;for(e=e.replace(/,/gi,".");""!=e&&"0"==e.substr(0,1);)e=e.substr(1);return f="NaN"==(f=parseFloat(e)).toString()?0:f}function Cancel(e){e=e||window.event;try{e.cancel=!0}catch(e){}try{e.keyCode=0}catch(e){}try{e.cancelBubble=!0}catch(e){}try{e.returnValue=!1}catch(e){}try{e.preventDefault()}catch(e){}try{e.stopPropagation()}catch(e){}}function setLink(a,link){"javascript"!==link.substr(0,10)?(a.href=link,a.target="_blank",a.onclick=function(e){e.stopPropagation()}):(a.href="javascript:void(0)",a.onclick=function(){eval(link.substr(11)),event.stopPropagation()})}function makeSortable(o){var a;function i(e,t){var i=!1,s=e.hasClass("tablesorter-headerAsc");a&&(a.removeClass("tablesorter-headerDesc"),a.removeClass("tablesorter-headerAsc")),s?(e.addClass("tablesorter-headerDesc"),i=!0):e.addClass("tablesorter-headerAsc"),a=e;for(var n=0;n<o.tBodies.length;n++){var r=o.tBodies[n];r.hasClass("tablesorter-no-sort")||!function(e,i,s){for(var t=[],n=0;n<e.childNodes.length;n++)t.push(e.childNodes[n]);t.sort(function(e,t){e=l(e.childNodes[i].textContent),t=l(t.childNodes[i].textContent);return e===t?0:e<t^s?1:-1});for(n=0;n<t.length;n++)e.ac(t[t.length-n-1])}(r,t,i)}}function l(e){e=(e=(e=(e=(e="."===e.substr(e.length-1)?e.substr(0,e.length-1):e).toLowerCase()).replaceAll("a","ae")).replaceAll("ö","oe")).replaceAll("ü","ue");var t=parseInt(e);return e=isNaN(t)||(t+"").length!==e.length?e:t}if(o.tHead.childNodes.length)for(var e=o.tHead.childNodes[0],t=0;t<e.childNodes.length;t++)!function(e,t){e.hasClass("sorter-false")||""===e.textContent||(e.cc("div"),e.addClass("tablesorter-header"),e.onclick=function(){i(e,t)})}(e.childNodes[t],t)}function TimeText(e,t){return new TimeFormat(t).Format(e)}function TimeFormat(e){this.plusMinus=0,this.modulo=!1,this.usesDays=!1,this.usesHours=!1,this.usesMinutes=!1,this.usesSeconds=!1,this.parts=[];var f=this;function m(e,t,i,s){if(3==t){for(var n=e+"";n.length<t;)n="0"+n;if(s)for(var r=0;r<i;r++)"0"==n.substr(0,1)&&(n=n.substr(1));return n}if(2==t&&1==i){if(s)return e+"";if(e<10)return"0"+e}else if(2==t&&0==i){if(e<10)return"0"+e}else if(2==t&&2==i){if(s)return 0==e?"":e+"";if(e<10)return"0"+e}else if(1==t&&1==i&&s&&0==e)return"";return e+""}!function e(t){if(!t||""==t)return e("-hh:mm:ss[lang:GEN_DIGITSEP]kKKK");for(var i=0;i<t.length;i++){var s=t.substr(i,1);if("-"==s&&0==f.parts.length)f.plusMinus=2;else if("+"==s&&0==f.parts.length)f.plusMinus=1;else if("%"==s&&0==f.parts.length)f.modulo=!0;else if("\\"==t[i])f.parts.push({partType:1,text:t.substr(i+1,1)}),i++;else if("a"==t[i])f.parts.push({partType:8});else if("A"==t[i])f.parts.push({partType:9});else{for(var n=i,r=t.substr(n,1),o=r.toUpperCase();i<t.length-1&&o==t.substr(i+1,1).toUpperCase();)i++,r=t.substr(n,i-n+1);var s=r.substr(0,1).toUpperCase(),a=r.length;switch(4<a&&(a=4),s){case"D":f.usesDays=!0,f.parts.push({partType:2,digits:a,flex:r.split("D").length-1});break;case"H":f.usesHours=!0,f.parts.push({partType:3,digits:a,flex:r.split("H").length-1});break;case"G":f.usesHours=!0,f.parts.push({partType:4,digits:a,flex:r.split("G").length-1});break;case"M":f.usesMinutes=!0,f.parts.push({partType:5,digits:a,flex:r.split("M").length-1});break;case"S":f.usesSeconds=!0,f.parts.push({partType:6,digits:a,flex:r.split("S").length-1});break;case"K":f.parts.push({partType:7,digits:a,flex:r.split("K").length-1});break;default:f.parts.push({partType:1,text:r})}}}}(e),this.Format=function(e){var t=e<0;if(t){if(0==f.plusMinus)return"";e=-e}f.modulo&&(f.usesHours?e%=86400:f.usesMinutes?e%=3600:e%=60);var i,s=0,n=0,r=0,o=e>>0,a=Math.round(1e4*(e-o)),l=(f.usesDays&&(o-=86400*(s=o/86400>>0)),f.usesHours&&(o-=3600*(n=o/3600>>0)),f.usesMinutes&&(o-=60*(r=o/60>>0)),!1),d=!1,c="";for(i in f.parts){var u=f.parts[i],v="";switch(u.partType){case 1:l?l=!1:v=u.text;break;case 2:l=""==(v=m(s,u.digits,u.flex,0==c.length));break;case 3:l=""==(v=m(n,u.digits,u.flex,0==c.length));break;case 4:for(var p=n;12<p;)p-=12;l=""==(v=m(p,u.digits,u.flex,0==c.length));break;case 5:l=""==(v=m(r,u.digits,u.flex,0==c.length));break;case 6:l=""==(v=m(o,u.digits,u.flex,0==c.length));break;case 7:for(v=a+"";v.length<4;)v="0"+v;for(var v=v.substr(0,u.digits),h=0;h<u.flex;h++)"0"==v.substr(v.length-1)&&(v=v.substr(0,v.length-1));""==v&&d&&(c=c.substr(0,c.length-1)),l=""==v;break;case 8:v=12<=n%24?"pm":"am";break;case 9:v=12<=n%24?"PM":"AM"}c+=v,d=1==u.partType}return t?"-"+c:1==f.plusMinus?"+"+c:c}}function IsNumeric(e){if(""!=e){var t,s=!0;for(i=0;i<e.length&&1==s;i++)t=e.charAt(i),-1=="0123456789.".indexOf(t)&&(s=!1);return s}}function isArray(e){return e.constructor===Array}function getXHR(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject){try{http_request=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{http_request=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}return http_request}}function Get(e,t){if(void 0!==t)for(var i in t)void 0!==t[i]&&(e+=(0<e.indexOf("?")?"&":"?")+i+"="+encodeURIComponent(t[i]));var n=getXHR();try{n.timeout=3e4}catch(e){}return new Promise(function(i,s){n.ontimeout=function(){err={error:"Timeout"},s(err)},n.onerror=function(){0==n.status&&(err={error:"Request failed"},s(err))},n.onload=function(e){if(4===n.readyState){var t=n.responseText;try{t=JSON.parse(t)}catch(e){}200===n.status?i(t):400<=n.status&&((t=t||{error:"unknown error, response code "+n.status}).status=n.status,s(t))}},n.open("GET",e,!0),n.send(null)})}geiFunctions(parent),geiFunctions(document.body),showLoading(!0),loadConfig(function(){var e;showInfoText(),void 0!==listToShow?(void 0===contestToShow&&(contestToShow=0),(e=getListByName(listToShow))&&showList(e.ID,contestToShow)):(e=location.href.split("#")[1])?showList((e=decodeURIComponent(e).split("_"))[1],e[0],e[2]):showLists()}),removeEmbeddedMargin(),window.addEventListener?window.addEventListener("resize",resize,!1):window.attachEvent&&window.attachEvent("resize",resize),window.onpopstate=function(){var e;config&&(e="#",(e=0<=window.location.href.indexOf("#")?"#"+window.location.href.split("#")[1]:e)!==lastAnchor)&&((e=window.location.href.split("#")[1])?showList((e=e.split("_"))[1],e[0],e[2]):showLists())},self.DetailsWindow=new function(){var divDetailsFader=null,divDetailsParent=null,divOuter=null,divLegs,divSplits,currentPID=0;function createWriteCommentLink(s,n,r,o){var a=ce("div"),e=(a.className="WriteComment",a.cc("button"));return e.at(langItems.writeComment),e.onclick=function(){var e=a.parentNode,e=(e.removeChild(a),e.cc("div")),t=(e.className="WriteComment2",e.cc("input")),i=(t.type="text",t.placeholder=langItems.commentNamePH,getCookie("commentname")),i=(void 0!==i&&(t.value=i),t.onkeyup=function(){this.button.activate()},t.onchange=function(){this.value=this.value.trim()},t.focus(),e.cc("input")),e=(i.type="text",i.placeholder=langItems.commentTextPH,i.onkeyup=function(){this.button.activate()},i.onchange=function(){this.value=this.value.trim()},e.cc("br"),e.at(langItems.commentWhy+" ",!0),e.at(langItems.commentWhy2),e.cc("br"),e.at(langItems.commentRules+" ",!0),e.at(langItems.commentRules2),e.cc("br"),e.cc("div").cc("button"));e.disabled=!0,e.at(langItems.commentSend),e.input1=t,e.input2=i,e.pid=s,t.button=e,(i.button=e).activate=function(){this.disabled=this.input1.value.length<2||this.input2.value.length<2},e.onclick=function(){setCookie("commentname",this.input1.value,9999);var e=this,t=(e.disable=!0,this.input2);Get(rrp_server+"/"+eventid+"/sendComment",{key:config.key,pid:this.pid,username:this.input1.value,text:this.input2.value}).then(function(){t.value="",n.commentCount++,currListData.comments[s]||(currListData.comments[s]=0),currListData.comments[s]++;var e=langItems.CommentsInfo.replace("[x]",n.commentCount);n.title=e,n.className="Comments1",r&&r.clear(e),o&&o()}).finally(function(){e.disable=!1}).catch(function(e){alert("Sending comment failed. Please try again.")})}},a}this.isVisible=function(){return null!=divDetailsParent},this.hide=function(){this.isVisible()&&(600<=window.innerWidth&&600<=window.innerHeight?(divDetailsParent.style.transition="opacity 300ms ease-out",divDetailsParent.style.opacity="0",window.setTimeout(function(){document.body.style.overflow="",divDetailsFader&&divDetailsFader.parentNode.removeChild(divDetailsFader),divDetailsFader=null,divDetailsParent&&divDetailsParent.parentNode&&divDetailsParent.parentNode.removeChild(divDetailsParent),divDetailsParent=null},300)):(divOuter.style.transition="left 0.5s",divOuter.style.left=window.innerWidth+"px",window.setTimeout(function(){document.body.style.overflow="",divDetailsFader&&divDetailsFader.parentNode.removeChild(divDetailsFader),divDetailsFader=null,divDetailsParent&&divDetailsParent.parentNode&&divDetailsParent.parentNode.removeChild(divDetailsParent),divDetailsParent=null},500)),divMainDiv.style.display="",divSplits=divLegs=currArrPointer=null)},this.UpdateSplits=function(){Get(rrp_server+"/"+eventid+"/RRPublish/data/splits",{key:config.key,pid:currentPID}).then(function(e){var t=!1,i=!1;if(divLegs)for(;1<divLegs.childNodes.length;)divLegs.removeChild(divLegs.lastChild);if(divSplits)for(;1<divSplits.childNodes.length;)divSplits.removeChild(divSplits.lastChild);if(e){var s,n="1"===e.SplitConfig.substr(2,1);if(divLegs){var r=divLegs.cc("div"),o=(r.className="LegsInner",r.cc("div"));(u=o.cc("div")).cc("div"),u.cc("div").at(langItems.SplitsHead1),"0"!==e.SplitConfig.substr(10,1)&&(u.cc("div").at(langItems.SplitsHead2),u.lastChild.className="tdLegSpeed"),"0"!==e.SplitConfig.substr(3,1)&&(u.cc("div").at(langItems.SplitsHead3),u.lastChild.className="tdLegRO"),"0"!==e.SplitConfig.substr(4,1)&&(u.cc("div").at(langItems.SplitsHead4),u.lastChild.className="tdLegRG"),"0"!==e.SplitConfig.substr(5,1)&&(u.cc("div").at(langItems.SplitsHead5),u.lastChild.className="tdLegRA"),e.Legs||(e.Legs=[]);for(var a=0;a<e.Legs.length;a++){var l=e.Legs[a],t=!0;(u=o.cc("div")).tdName=u.cc("div"),u.tdTime=u.cc("div"),"0"!==e.SplitConfig.substr(10,1)&&(u.tdSpeed=u.cc("div"),u.tdSpeed.className="tdLegSpeed"),"0"!==e.SplitConfig.substr(3,1)&&(u.tdRO=u.cc("div"),u.tdRO.className="tdLegRO"),"0"!==e.SplitConfig.substr(4,1)&&(u.tdRG=u.cc("div"),u.tdRG.className="tdLegRG"),"0"!==e.SplitConfig.substr(5,1)&&(u.tdRA=u.cc("div"),u.tdRA.className="tdLegRA"),u.tdName.at(Text(l.Name)),l.Exists||(u.className="predicted",u.firstChild.at(" *"),u.parentNode.hasPrediction=!0),u.tdTime.at(l.Time),l.Speed&&u.tdSpeed&&(u.tdSpeed.cc("span").at(langItems.SplitsHead2+": "),u.tdSpeed.lastChild.className="rrSplitsLabel",u.tdSpeed.at(l.Speed)),l.RO&&0<l.RO&&"0"!==e.SplitConfig.substr(3,1)&&(u.tdRO.cc("span").at(langItems.SplitsHead3+": "),u.tdRO.lastChild.className="rrSplitsLabel",u.tdRO.at(l.RO),n)&&u.tdRO.cc("span").at("/"+l.ROM),l.RG&&0<l.RG&&"0"!==e.SplitConfig.substr(4,1)&&(u.tdRG.cc("span").at(langItems.SplitsHead4+": "),u.tdRG.lastChild.className="rrSplitsLabel",u.tdRG.at(l.RG),n)&&u.tdRG.cc("span").at("/"+l.RGM),l.RA&&0<l.RA&&"0"!==e.SplitConfig.substr(5,1)&&(u.tdRA.cc("span").at(langItems.SplitsHead5+": "),u.tdRA.lastChild.className="rrSplitsLabel",u.tdRA.at(l.RA),n)&&u.tdRA.cc("span").at("/"+l.RAM)}}if(divSplits){var d=divSplits.cc("div"),c=(d.className="SplitsInner",d.cc("div"));(u=c.cc("div")).cc("div"),"0"!==e.SplitConfig.substr(6,1)&&(u.cc("div").at(langItems.SplitsHead6),u.lastChild.className="tdSplitTOD"),"0"!==e.SplitConfig.substr(7,1)&&(u.cc("div").at(langItems.SplitsHead7),u.lastChild.className="tdSplitGun"),"0"!==e.SplitConfig.substr(8,1)&&(u.cc("div").at(langItems.SplitsHead8),u.lastChild.className="tdSplitChip"),"0"!==e.SplitConfig.substr(9,1)&&(u.cc("div").at(langItems.SplitsHead9),u.lastChild.className="tdSplitSector"),"0"!==e.SplitConfig.substr(10,1)&&(u.cc("div").at(langItems.SplitsHead2),u.lastChild.className="tdSplitSpeed"),"0"!==e.SplitConfig.substr(3,1)&&(u.cc("div").at(langItems.SplitsHead3),u.lastChild.className="tdSplitRO"),"0"!==e.SplitConfig.substr(4,1)&&(u.cc("div").at(langItems.SplitsHead4),u.lastChild.className="tdSplitRG"),"0"!==e.SplitConfig.substr(5,1)&&(u.cc("div").at(langItems.SplitsHead5),u.lastChild.className="tdSplitRA"),e.Splits||(e.Splits=[]);for(a=0;a<e.Splits.length;a++){var u,l=e.Splits[a],i=!0;(u=c.cc("div")).tdName=u.cc("div"),"0"!==e.SplitConfig.substr(6,1)&&(u.tdTOD=u.cc("div"),u.tdTOD.className="tdSplitTOD"),"0"!==e.SplitConfig.substr(7,1)&&(u.tdGun=u.cc("div"),u.tdGun.className="tdSplitGun"),"0"!==e.SplitConfig.substr(8,1)&&(u.tdChip=u.cc("div"),u.tdChip.className="tdSplitChip"),"0"!==e.SplitConfig.substr(9,1)&&(u.tdSector=u.cc("div"),u.tdSector.className="tdSplitSector"),"0"!==e.SplitConfig.substr(10,1)&&(u.tdSpeed=u.cc("div"),u.tdSpeed.className="tdSplitSpeed"),"0"!==e.SplitConfig.substr(3,1)&&(u.tdRO=u.cc("div"),u.tdRO.className="tdSplitRO"),"0"!==e.SplitConfig.substr(4,1)&&(u.tdRG=u.cc("div"),u.tdRG.className="tdSplitRG"),"0"!==e.SplitConfig.substr(5,1)&&(u.tdRA=u.cc("div"),u.tdRA.className="tdSplitRA"),u.tdName.at(Text(l.Name)),l.Exists||(u.className="predicted",u.firstChild.at(" *"),u.parentNode.hasPrediction=!0),u.tdTOD&&u.tdTOD.at(l.TOD),u.tdGun&&u.tdGun.at(l.Gun),u.tdChip&&u.tdChip.at(l.Chip),u.tdSector&&u.tdSector.at(l.Sector),l.Speed&&u.tdSpeed&&(u.tdSpeed.cc("span").at(langItems.SplitsHead2+": "),u.tdSpeed.lastChild.className="rrSplitsLabel",u.tdSpeed.at(l.Speed)),l.RO&&0<l.RO&&"0"!==e.SplitConfig.substr(3,1)&&(u.tdRO.cc("span").at(langItems.SplitsHead3+": "),u.tdRO.lastChild.className="rrSplitsLabel",u.tdRO.at(l.RO),n)&&u.tdRO.cc("span").at("/"+l.ROM),l.RG&&0<l.RG&&"0"!==e.SplitConfig.substr(4,1)&&(u.tdRG.cc("span").at(langItems.SplitsHead4+": "),u.tdRG.lastChild.className="rrSplitsLabel",u.tdRG.at(l.RG),n)&&u.tdRG.cc("span").at("/"+l.RGM),l.RA&&0<l.RA&&"0"!==e.SplitConfig.substr(5,1)&&(u.tdRA.cc("span").at(langItems.SplitsHead5+": "),u.tdRA.lastChild.className="rrSplitsLabel",u.tdRA.at(l.RA),n)&&u.tdRA.cc("span").at("/"+l.RAM)}}divLegs&&o.hasPrediction&&((s=r.cc("div")).className="Prediction",s.at("* "+langItems.SplitsLabel3)),divSplits&&c.hasPrediction&&((s=d.cc("div")).className="Prediction",s.at("* "+langItems.SplitsLabel3))}divSplits&&(i?divSplits.className="":divSplits.parentNode.removeChild(divSplits)),divLegs&&(t?divLegs.className="":divLegs.parentNode.removeChild(divLegs))}).catch(function(e){})},this.show=function(pid){currentPID=pid,document.body.style.overflow="hidden",600<=window.innerWidth&&600<=window.innerHeight&&(divDetailsFader=document.body.cc("div"),divDetailsFader.className="divRRPublishDetailsFader"),divDetailsParent=document.body.cc("table"),divDetailsParent.onclick=function(){self.DetailsWindow.hide()},divDetailsParent.className="divDetailsParent",divDetailsParent.cellPadding=0;var tb=divDetailsParent.cc("tbody"),tr=tb.cc("tr"),td=tr.cc("td"),img=(divOuter=td.cc("div"),divOuter.className="divDetailsOuter",divOuter.cc("img")),div=(img.className="imgDetailsClose",img.src=rrp_server+"/RRPublish/graphics/close_black.png",img.onclick=function(){self.DetailsWindow.hide()},divOuter.cc("div")),divClose=(div.className="divDetails Loading",div.onclick=function(e){e.stopPropagation()},600<=window.innerWidth&&600<=window.innerHeight&&(div.style.maxHeight=window.innerHeight-50+"px"),div.cc("div")),divInner=(divClose.className="divCloseBar",divClose.cc("div").innerHTML=langItems.detailsBack,div.onclick=function(){self.DetailsWindow.hide()},div.cc("div")),divHead=(divInner.className="divDetailsInner",divInner.onclick=function(e){e.stopPropagation()},divInner.cc("div")),divHeadText=(divHead.className="divDetailsHead",divInner.ac(CreateFavoriteMarker(pid,currDetailsTR)),divInner.cc("div")),div2,divDetailResults=(divHeadText.className="divDetailsHeadText",!config.SplitConfig||"1"!=config.SplitConfig.substr(0,1)&&"1"!=config.SplitConfig.substr(1,1)||(currList&&currList.Live&&!config.EventOver&&(divInner.className+=" WithLiveUpdate",div2=divInner.cc("div"),div2.className="RRLiveUpdate",div2.at(langItems.liveUpdateActive)),"1"===config.SplitConfig.substr(0,1)&&(divLegs=divInner.cc("div"),divLegs.className="Loading",divLegs.cc("div").at(langItems.SplitsLabel1)),"1"===config.SplitConfig.substr(1,1)&&(divSplits=divInner.cc("div"),divSplits.className="Loading",divSplits.cc("div").at(langItems.SplitsLabel2)),this.UpdateSplits()),divInner.cc("div")),divCertificates=divInner.cc("div"),divLinks=divInner.cc("div"),divPhotos=divInner.cc("div"),divSocial=divInner.cc("div"),divComments=divInner.cc("div"),loadDetails=function(){Get(rrp_server+"/"+eventid+"/RRPublish/data/details",{key:config.key,pid:pid,lang:rrp_lang}).then(function(e){if(e){if(e.Head&&divHead.clear().cc("div").at(e.Head),e.HeadText&&(divHeadText.clear().cc("div").innerHTML=e.HeadText),e.Photos&&e.Photos.length){divPhotos.className="divDetailsPhotos",divPhotos.clear().cc("div").at(langItems.detailsPhotos);for(var t=divPhotos.cc("div"),i=0;i<e.Photos.length;i++){var s=t.cc("a");s.target="_blank",s.href=e.Photos[i][1],s.cc("img").src=e.Photos[i][0]}}if(!config.DisableiComments){divComments.clear().cc("div").at(langItems.detailsComments),divComments.className="divDetailsComments",divComments.divInner=divComments.cc("div");var n=divComments.divInner.cc("div");e.Comments||(e.Comments=[]);for(i=0;i<e.Comments.length;i++){var r=n.cc("div");r.cc("b").at(e.Comments[i].UserName+": "),r.cc("span").at(" ["+new Date(e.Comments[i].Submitted).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})+"]"),r.at(e.Comments[i].Comment)}divComments.divInner.ac(createWriteCommentLink(pid,currDetailsTR.firstChild,currDetailsTR.CommentInfo,function(){loadDetails()}))}}}).catch(function(e){})},divSocialInner=(loadDetails(),currList.Details&&(divDetailResults.className="Loading",divDetailResults.cc("div").at(langItems.detailsDetails),Get(rrp_server+"/"+eventid+"/RRPublish/data/list",{key:config.key,fav:getCookie("favs"+eventid),listname:currList.Details,page:page,contest:currContest,r:"pid",pid:pid,selectorResult:selectorResult}).then(function(data){if(data.data){setDataCols(data),divDetailResults.className="divDetailsResults";for(var div2=divDetailResults.cc("div"),table=div2.cc("table"),fields=data.list.Fields,lines=1,cols=1,colsArr=[],i=0;i<fields.length;i++)fields[i].Line>lines&&(lines=fields[i].Line),colsArr[fields[i].Line]||(colsArr[fields[i].Line]=0),colsArr[fields[i].Line]+=1+fields[i].ColOffset,1<fields[i].ColSpan&&(colsArr[fields[i].Line]+=fields[i].ColSpan-1),colsArr[fields[i].Line]>cols&&(cols=colsArr[fields[i].Line]);for(var z=1;z<=lines;z++){for(var labelFound=!1,thead=table.cc("thead"),tr=ce("tr"),headLine2=!1,c=1,i=0;i<fields.length;i++)if(fields[i].Line===z){var l=Text(fields[i].Label);l&&(labelFound=!0),fields[i].Label2&&(headLine2=!0);for(var v=1;v<=fields[i].ColOffset;v++)tr.cc("th").innerHTML="&nbsp;",c++;var th=tr.cc("th"),colSpan=1;1<fields[i].ColSpan&&(colSpan=fields[i].ColSpan,th.colSpan=colSpan),c+=colSpan,th.at(l),1==fields[i].Alignment?th.style.textAlign="left":2==fields[i].Alignment?th.style.textAlign="center":3==fields[i].Alignment&&(th.style.textAlign="right")}for(var v=1;v<=cols-c;v++)tr.cc("th").innerHTML="&nbsp;";if(labelFound&&thead.ac(tr),headLine2){for(var c=1,tr2=ce("tr"),i=0;i<fields.length;i++)if(fields[i].Line===z){for(var l=Text(fields[i].Label2),v=1;v<=fields[i].ColOffset;v++)tr2.cc("th").innerHTML="&nbsp;";var th=tr2.cc("th"),colSpan=1;1<fields[i].ColSpan&&(colSpan=fields[i].ColSpan,th.colSpan=colSpan),c+=colSpan,th.at(l),1==fields[i].Alignment?th.style.textAlign="left":2==fields[i].Alignment?th.style.textAlign="center":3==fields[i].Alignment&&(th.style.textAlign="right")}for(var v=1;v<=cols-c;v++)tr.cc("th").innerHTML="&nbsp;";thead.ac(tr2)}}for(var tb=table.cc("tbody"),i=0;i<data.data.length;i++)for(var r=data.data[i],z=1;z<=lines;z++){for(var tr=tb.cc("tr"),currLineCount=(tr.className="Hover LastRecordLine",data.list.LineDynamicFormat&&setDynamicFormat(tr,r[data.list.LineDynamicFormatCol]),0),j=0;j<fields.length;j++)if(fields[j].Line===z){for(var v=1;v<=fields[j].ColOffset;v++)tr.cc("td").at(" "),currLineCount++;var td=tr.cc("td"),colSpan=1,s=(1<fields[j].ColSpan&&(colSpan=fields[j].ColSpan,td.colSpan=colSpan),currLineCount+=colSpan,fields[j].FontItalic&&(td.style.fontStyle="italic"),fields[j].FontUnderlined&&(td.style.textDecoration="underline"),fields[j].FontBold&&(td.style.fontWeight="bold"),1==fields[j].Alignment?td.style.textAlign="left":2==fields[j].Alignment?td.style.textAlign="center":3==fields[j].Alignment&&(td.style.textAlign="right"),fields[j].Color&&(td.style.color=fields[j].Color),Text(r[fields[j].DataCol])),l,a;""==s&&(s=" "),fields[j].Link?(l=r[fields[j].LinkCol],a=td.cc("a"),a.at2(s),"javascript:"!==l.substr(0,11)?(a.href=l,a.target="_blank",a.tr=tr,a.onclick=function(e){e.stopPropagation()}):(a.href="javascript:void(0)",a.sLink=l.substr(11),a.onclick=function(){eval(this.sLink)})):td.at2(s),fields[j].DynamicFormat&&setDynamicFormat(td,r[fields[j].DynamicFormatCol])}for(var j=1;j<=cols-currLineCount;j++)tr.cc("td").at(" ")}}}).catch(function(e){})),config.showCertificates&&(divCertificates.className="Loading",Get(rrp_server+"/"+eventid+"/RRPublish/data/certificates",{key:config.key,pid:pid}).then(function(e){if(e=e||[],divCertificates.className="divDetailsCertificates",0<e.length){divCertificates.cc("div").at(langItems.detailsCertificates);for(var t=divCertificates.cc("div"),i=0;i<e.length;i++){var s,n=t.cc("div");n.cname=e[i].cs,n.pid=pid,n.onclick=function(){var e=encodeURIComponent(this.cname);e=(e=e.replaceAll("%2F","%252F")).replaceAll("%5C","%255C"),window.open(rrp_server+"/"+eventid+"/certificate/"+this.pid+"/"+e)},s=e[i].pic?rrp_server+"/"+eventid+"/RRPublish/picture.php?name="+encodeURIComponent(e[i].pic):rrp_server+"/"+eventid+"/RRPublish/data/thumbnail?name="+encodeURIComponent(e[i].cs),n.cc("img").src=s,n.cc("br"),n.at(Text(e[i].label))}}div.className="divDetails"}).catch(function(e){})),Get(rrp_server+"/"+eventid+"/RRPublish/data/links",{key:config.key,pid:pid}).then(function(e){if(0!==(e=e||[]).length){divLinks.cc("div").at(langItems.detailsLinks),divLinks.className="divDetailsLinks";for(var t=divLinks.cc("div"),i=0;i<e.length;i++){var s=t.cc("div");s.url=e[i].url,s.onclick=function(){"http"!==this.url.substr(0,4)&&(this.url="http://"+this.url),window.open(this.url)},s.cc("img").src=rrp_server+"/"+eventid+"/RRPublish/picture.php?name="+encodeURIComponent(e[i].pic),s.cc("br"),s.at(Text(e[i].label))}}}).catch(function(e){}),divSocial.className="divDetailsSocial",divSocial.cc("div").at("Social"),divSocial.cc("div")),img=(divSocialInner.at(langItems.social2),divSocialInner.cc("br"),divSocialInner.cc("img")),img=(img.style.cursor="pointer",img.src=rrp_server+"/RRPublish/graphics/facebook.png",img.onclick=function(){share("facebook")},divSocialInner.cc("img"));img.style.cursor="pointer",img.src=rrp_server+"/RRPublish/graphics/twitter-x-logo.png",img.onclick=function(){share("twitter")},div.className="divDetails",divDetailsParent.style.display="",(window.innerWidth<600||window.innerHeight<600)&&(divOuter.style.left=window.innerWidth+"px",window.setTimeout(function(){divOuter.style.transition="left 0.5s",divOuter.style.left=0},10))}},self.LiveUpdate=new function(){var i=-1,s=10;this.Stop=function(){i=-1},this.DoNow=function(){i=1},this.Start=function(){i=s},window.setInterval(function(){var e,t;!currList||!currList.Live||config.EventOver||n.check()||i<=0||0==--i&&(self.DetailsWindow.isVisible()?(self.DetailsWindow.UpdateSplits(),i=s):(e=lastSearchTerm?"search":favOnly?"favorites":currList.Leader?"leaders":"all",t=++lastRequestID,Get(rrp_server+"/"+eventid+"/RRPublish/data/list",{key:config.key,listname:currList.Name,page:page,contest:currContest,r:e,l:currList.Leader,fav:getCookie("favs"+eventid),openedGroups:JSON.stringify(openedGroups),selectorResult:selectorResult,f:groupFilter.join("\f"),term:lastSearchTerm,mid:currListMID}).then(function(e){e.LiveUpdateInterval&&(s=e.LiveUpdateInterval),lastRequestID===t&&0===i&&(e.status||(e.status=0),304!=e.status)&&e.list&&(parent.RRLiveUpdate&&(parent.RRLiveUpdate.addClass("RRLiveUpdateLoading"),window.setTimeout(function(){parent.RRLiveUpdate.removeClass("RRLiveUpdateLoading")},1e3)),setDataCols(e),listFormat=(currListData=e).list,listGroupingColWidths=calcListGroupingColWidths(e.data,0),listColWidths=calcListColWidths(e.data,0),determineColsAndLines(listFormat),determineHiddenCols(),buildList(e))}).finally(function(){i=s-(1024<=window.innerWidth?6:0)}).catch(function(e){400<=e.status&&loadConfig()})))},1e3);var n=new function(){var t,i,s=new Date;function e(){var e;t&&(e=t,t=null,e.style.transition="opacity 300ms ease-out",e.style.opacity="0",window.setTimeout(function(){document.body.style.overflow="",i&&i.parentNode.removeChild(i),i=null,e.parentNode&&e.parentNode.removeChild(e)},300),self.LiveUpdate.DoNow()),s=new Date}this.check=function(){return 12e5<new Date-s&&(this.show(),!0)},this.show=function(){t||(document.body.style.overflow="hidden",(i=document.body.cc("div")).className="divRRPublishDetailsFader",i.style.zIndex=10900,(t=document.body.cc("div")).onclick=e,t.className="LiveUpdateContinue",t.cc("div").at(langItems.LiveUpdateContinue1),600<=window.innerWidth&&600<=window.innerHeight?t.cc("div").at(langItems.LiveUpdateContinue2):t.cc("div").at(langItems.LiveUpdateContinue3))},window.addEventListener?(window.addEventListener("scroll",e,!1),document.addEventListener("mousemove",e,!1),document.addEventListener("mousedown",e,!1),document.addEventListener("keydown",e,!1),document.addEventListener("touchstart",e,!1)):window.attachEvent&&(window.attachEvent("scroll",e),document.attachEvent("mousemove",e),document.attachEvent("mousedown",e),document.attachEvent("keydown",e))}},self.Favorites=new function(){var r=null;this.Is=function(e){return 0<=(r=null===r?this.Get():r).indexOf(e+"")},this.Get=function(){var e=getCookie("favs"+eventid);return e=e?e.split(","):[]},this.Set=function(e,t){var i=[];if(s=getCookie("favs"+eventid))for(var s=s.split(","),n=0;n<s.length;n++)s[n]==e?t&&(e=0):i.push(s[n]);0!=e&&t&&i.push(e+""),setCookie("favs"+eventid,(r=i).join(","),9999)}},self.TimeUpdater=new function(){var n=0;this.SetOffset=function(e){n=e},this.AddField=function(e,t){var t=t.substr(1,t.length-2).split("|"),i=(new Date/1e3-n)%86400;e.timeBase=val(t[0]),e.timeFormat=t[1],e.at(TimeText(i-e.timeBase,e.timeFormat)),e.addClass("TimeUpdater")},window.setInterval(function(){if(divPoweredBy&&divPoweredBy.fix&&divPoweredBy.fix(),currList)for(var e=parent.getElementsByClassName("TimeUpdater"),t=(new Date/1e3-n)%86400,i=0;i<e.length;i++){var s=e[i];s.clear(TimeText(t-s.timeBase,s.timeFormat))}},1e3)}}